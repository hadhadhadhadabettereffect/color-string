var ColorString=function(){function t(t){return"number"==typeof t&&t===(0|t)}function e(e){return t(e)&&e>=0&&255>=e}function r(t,e){console.warn("invalid value "+e+" for RGBA."+t)}function n(t,e){return h[t]>>(e<<3)&255}function i(t){var e=h[t].toString(16);return"#"+p.substring(e.length)+e}function o(t){return"rgba("+n(t,2)+","+n(t,1)+","+n(t,0)+","+g[t].toPrecision(2)+")"}function u(t,e,r){var n=!1;return isFinite(r)&&(0>r?r=0:r>255&&(r=255),h[t]&=~(255<<(e<<3)),h[t]|=r<<(e<<3),n=!0),n}function s(){var t=l++;Object.defineProperty(this,"id",{value:t,writable:!1,configurable:!1,enumerable:!1}),h[t]=a,g[t]=1}var a=16777215,p="000000",f=/^(\d|[a-f])*$/,c=/^(\d|\,|\d\.\d)*$/,d=/(^rgb(a|)|\(|\)$| )/g,h=[],g=[],l=0;return s.prototype=Object.create(null),Object.defineProperty(s.prototype,"red",{get:function(){return n(this.id,2)},set:function(t){return u(this.id,2,parseInt(t))||r("red",t),n(this.id,2)}}),Object.defineProperty(s.prototype,"green",{get:function(){return n(this.id,1)},set:function(t){return u(this.id,1,parseInt(t))||r("green",t),n(this.id,1)}}),Object.defineProperty(s.prototype,"blue",{get:function(){return n(this.id,0)},set:function(t){return u(this.id,0,parseInt(t))||r("blue",t),n(this.id,0)}}),Object.defineProperty(s.prototype,"alpha",{get:function(){return g[this.id]},set:function(t){var e=parseFloat(t);return isFinite(e)?(0>e?e=0:e>1&&(e=1),g[this.id]=e):r("alpha",e),g[this.id]}}),Object.defineProperty(s.prototype,"rgba",{get:function(){return o(this.id)},set:function(t){var n="string"==typeof t;if(n&&(t=t.replace(d,""),n=c.test(t))){var i=t.split(",");if(n=3===i.length||4===i.length){var s=parseInt(i[0]),a=parseInt(i[1]),p=parseInt(i[2]);if(n=e(s)&&e(a)&&e(p)){var f=this.id;u(f,2,s),u(f,1,a),u(f,0,p),4===i.length&&(this.alpha=parseFloat(i[3]))}}}return n||r("rgba",t),o(this.id)}}),Object.defineProperty(s.prototype,"hex",{get:function(){return i(this.id)},set:function(t){var e="string"==typeof t;return e&&("#"===t.charAt(0)&&(t=t.substring(1)),3===t.length&&(t+=t),e=6===t.length&&f.test(t.toLowerCase()),e&&(h[this.id]=parseInt(t,16))),e||r("hex",t),i(this.id)}}),s}();