var ColorString=function(){function t(t){return"number"==typeof t&&t===(0|t)}function e(e){return t(e)&&e>=0&&255>=e}function r(t,e){console.warn("invalid value "+e+" for RGBA."+t)}function n(t,e){return h[t]>>(e<<3)&255}function i(t){var e=h[t].toString(16);return"#"+a.substring(e.length)+e}function o(t){return"rgba("+n(t,2)+","+n(t,1)+","+n(t,0)+","+g[t].toPrecision(2)+")"}function u(e,r,n){return t(n)?(0>n?n=0:n>255&&(n=255),h[e]&=~(255<<(r<<3)),h[e]|=n<<(r<<3),!0):!1}function s(){var t=l++;Object.defineProperty(this,"id",{value:t,writable:!1,configurable:!1,enumerable:!1}),h[t]=f,g[t]=1}var f=16777215,a="000000",c=/^(\d|[a-f])*$/,p=/^(\d|\,|\d\.\d)*$/,d=/(^rgb(a|)|\(|\)$| )/g,h=[],g=[],l=0;return s.prototype=Object.create(null),Object.defineProperty(s.prototype,"red",{get:function(){return n(this.id,2)},set:function(t){return u(this.id,2,t)||r("red",t),n(this.id,2)}}),Object.defineProperty(s.prototype,"green",{get:function(){return n(this.id,1)},set:function(t){return u(this.id,1,t)||r("green",t),n(this.id,1)}}),Object.defineProperty(s.prototype,"blue",{get:function(){return n(this.id,0)},set:function(t){return u(this.id,0,t)||r("blue",t),n(this.id,0)}}),Object.defineProperty(s.prototype,"alpha",{get:function(){return g[this.id]},set:function(t){return"number"==typeof t?(0>t?t=0:t>1&&(t=1),g[this.id]=t):r("alpha",t),g[this.id]}}),Object.defineProperty(s.prototype,"rgba",{get:function(){return o(this.id)},set:function(t){var n="string"==typeof t;if(n&&(t=t.replace(d,""),n=p.test(t))){var i=t.split(",");if(n=3===i.length||4===i.length){var s=parseInt(i[0]),f=parseInt(i[1]),a=parseInt(i[2]);if(n=e(s)&&e(f)&&e(a)){var c=this.id;u(c,2,s),u(c,1,f),u(c,0,a),4===i.length&&(this.alpha=parseFloat(i[3]))}}}return n||r("rgba",t),o(this.id)}}),Object.defineProperty(s.prototype,"hex",{get:function(){return i(this.id)},set:function(t){var e="string"==typeof t;return e&&("#"===t.charAt(0)&&(t=t.substring(1)),3===t.length&&(t+=t),e=6===t.length&&c.test(t.toLowerCase()),e&&(h[this.id]=parseInt(t,16))),e||r("hex",t),i(this.id)}}),s}();